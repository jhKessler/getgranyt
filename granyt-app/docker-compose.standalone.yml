# =====================================================
# Granyt App - Standalone Docker Compose
# =====================================================
#
# This file allows you to run Granyt without building from source.
# Just download this file, create a .env file, and run!
#
# Quick Start:
# 1. Download this file: docker-compose.standalone.yml
# 2. Download the base file: docker-compose.base.yml
# 3. Create a .env file with the required variables (see below)
# 4. Run: docker compose -f docker-compose.base.yml -f docker-compose.standalone.yml up -d
#
# Required .env file contents:
# ----------------------------
# POSTGRES_PASSWORD=your-secure-database-password
# BETTER_AUTH_SECRET=your-32-char-secret-key-here
# BETTER_AUTH_URL=https://your-domain.com
#
# Optional:
# POSTGRES_USER=granyt
# POSTGRES_DB=granyt
# GRANYT_VERSION=latest           # Pin to specific version: 1.0.0, 1.1.0, etc.
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=your-email@example.com
# SMTP_PASSWORD=your-smtp-password
# SMTP_FROM_EMAIL=alerts@your-domain.com
# SMTP_FROM_NAME=Granyt Alerts
#
# =====================================================

services:
  # =========================
  # PostgreSQL Database
  # =========================
  postgres:
    image: postgres:17-alpine
    container_name: granyt-postgres

  # =========================
  # Database Migrations
  # =========================
  migrations:
    image: ghcr.io/jhkessler/granyt-app:${GRANYT_VERSION:-latest}-migrations
    container_name: granyt-migrations

  # =========================
  # Next.js Application
  # =========================
  app:
    image: ghcr.io/jhkessler/granyt-app:${GRANYT_VERSION:-latest}
    container_name: granyt-app
    ports:
      - "${APP_PORT:-3000}:3000"
